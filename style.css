/*
================================================================================
IMPACT RED // Black–White–Red UI System — COMPLETE CSS OVERHAUL
================================================================================
Principles: token‑driven, a11y‑first, motion‑safe, layered architecture,
progressive enhancement (OKLCH/Color‑mix fallbacks), fluid type/spacing, and
component isolation via @layer + :where().

NOTE: Prefer linking Google Fonts in HTML <head> for performance. If you must
@import, keep it first. Set font-display=swap.
================================================================================
*/

/* -------------------------------------------------------------------------- */
/* 0) Optional font import                                                     */
/* -------------------------------------------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap');

/* -------------------------------------------------------------------------- */
/* 1) CSS Layers                                                               */
/* -------------------------------------------------------------------------- */
@layer reset, tokens, base, components, utilities, overrides;

/* -------------------------------------------------------------------------- */
/* 2) RESET (modern, minimal, logical)                                         */
/* -------------------------------------------------------------------------- */
@layer reset {
  /* 2.1 Root defaults */
  :root {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    color-scheme: dark light;
    hanging-punctuation: first allow-end last;
  }

  /* 2.2 Box model + margin reset */
  *, *::before, *::after { box-sizing: border-box; }
  * { margin: 0; }

  /* 2.3 Media elements */
  img, svg, video, canvas, audio { display: block; max-inline-size: 100%; }
  img { block-size: auto; }

  /* 2.4 Typography */
  body { line-height: 1.6; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  input, button, textarea, select { font: inherit; color: inherit; }

  /* 2.5 Better focus default */
  :focus-visible { outline: 2px solid transparent; outline-offset: 2px; }

  /* 2.6 Smooth scroll, respect users later in motion section */
  html { scroll-behavior: smooth; }
}

/* -------------------------------------------------------------------------- */
/* 3) TOKENS (Design System)                                                   */
/* -------------------------------------------------------------------------- */
@layer tokens {
  :root {
    /* 3.1 Color tokens (Dark is default) */
    /* Use OKLCH for perceptual uniformity when supported */
    /* Base */
    --black: #000;                 /* pure */
    --bg-0: #000;                  /* canvas */
    --bg-1: #0d0d0d;               /* surface low */
    --bg-2: #161616;               /* surface */
    --bg-3: #1f1f1f;               /* surface high */
    --line-1: #2a2a2a;             /* borders */

    /* Text */
    --text-0: #ffffff;             /* strong */
    --text-1: #e3e3e3;             /* primary */
    --text-2: #bbbbbb;             /* secondary */
    --text-3: #8a8a8a;             /* muted */

    /* Brand (red) */
    --red-500: #ff0000;            /* base */
    --red-400: #ff3333;            /* hover */
    --red-600: #cc0000;            /* active */

    /* Effects */
    --overlay-900: rgba(0,0,0,.92);
    --overlay-700: rgba(0,0,0,.7);
    --overlay-500: rgba(255,255,255,.06);
    --overlay-red-100: rgba(255,0,0,.1);

    /* 3.2 Typography scale (fluid with clamp) */
    --font-sans: 'Poppins', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
    --font-mono: 'Fira Code', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;

    --fs-00: clamp(.72rem, .69rem + .15vw, .78rem);
    --fs-0:  clamp(.82rem, .78rem + .18vw, .9rem);
    --fs-1:  clamp(.95rem, .9rem + .2vw, 1rem);
    --fs-2:  clamp(1.15rem, 1.06rem + .35vw, 1.25rem);
    --fs-3:  clamp(1.35rem, 1.22rem + .5vw, 1.6rem);
    --fs-4:  clamp(1.8rem, 1.5rem + 1vw, 2.2rem);
    --fs-5:  clamp(2.3rem, 1.9rem + 1.6vw, 3rem);

    /* 3.3 Space scale (fluid) */
    --sp-2xs: clamp(.15rem, .1rem + .3vw, .3rem);
    --sp-xs:  clamp(.35rem, .3rem + .4vw, .6rem);
    --sp-sm:  clamp(.6rem, .5rem + .5vw, .9rem);
    --sp-md:  clamp(.95rem, .8rem + .5vw, 1.2rem);
    --sp-lg:  clamp(1.4rem, 1.1rem + .8vw, 1.9rem);
    --sp-xl:  clamp(2.1rem, 1.6rem + 1.2vw, 2.8rem);
    --sp-2xl: clamp(3rem, 2.2rem + 2vw, 4rem);

    /* 3.4 Radii & borders */
    --radius-sm: 6px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-pill: 999px;
    --border-1: 1px solid var(--line-1);
    --border-2: 2px solid var(--red-500);

    /* 3.5 Depth tokens (soft, not muddy) */
    --shadow-1: 0 2px 8px rgba(0,0,0,.35);
    --shadow-2: 0 6px 18px rgba(0,0,0,.45);
    --shadow-3: 0 14px 28px rgba(0,0,0,.5);
    --glow-red-1: 0 0 10px rgba(255,0,0,.35);
    --glow-red-2: 0 0 22px rgba(255,0,0,.5);

    /* 3.6 Motion */
    --easing-emph: cubic-bezier(.2,.7,.2,1);
    --t-fast: .18s var(--easing-emph);
    --t-med: .32s var(--easing-emph);
    --t-slow: .6s var(--easing-emph);

    /* 3.7 Max widths */
    --content-w: 1000px;
    --read-w: 72ch;
  }

  /* 3.8 Light theme (opt-in) */
  [data-theme="light"] {
    --bg-0: #ffffff;
    --bg-1: #f5f5f7;
    --bg-2: #eeeeef;
    --bg-3: #e7e7e9;
    --line-1: #d1d1d6;

    --text-0: #000;
    --text-1: #0f0f14;
    --text-2: #333;
    --text-3: #555;

    --overlay-900: rgba(255,255,255,.9);
    --overlay-700: rgba(255,255,255,.65);
    --overlay-500: rgba(0,0,0,.06);
  }
}

/* -------------------------------------------------------------------------- */
/* 4) BASE (elements, typography, backgrounds)                                 */
/* -------------------------------------------------------------------------- */
@layer base {
  html { scroll-padding-top: 80px; }

  body {
    font-family: var(--font-sans);
    font-size: var(--fs-1);
    color: var(--text-1);
    background-color: var(--bg-0);
    background-image:
      radial-gradient(80rem 40rem at 10% 0%, rgba(255,0,0,.06), transparent 55%),
      radial-gradient(60rem 30rem at 90% 100%, rgba(255,0,0,.05), transparent 60%),
      linear-gradient(transparent 99%, rgba(255,0,0,.08) 100%);
    background-attachment: fixed;
  }

  /* Links */
  a { color: var(--text-1); text-decoration: none; position: relative; transition: color var(--t-fast); }
  a:hover { color: var(--red-400); }
  a[data-underline]::after {
    content: ""; position: absolute; inset-inline: 0; block-size: 1px; inset-block-end: -2px;
    background: linear-gradient(90deg, var(--red-500), transparent);
    transform: scaleX(0); transform-origin: left; transition: transform var(--t-fast);
  }
  a[data-underline]:hover::after { transform: scaleX(1); }

  /* Buttons */
  button { cursor: pointer; border: none; background: none; color: inherit; font: inherit; }

  /* Focus ring */
  :focus-visible { box-shadow: 0 0 0 2px var(--red-500), var(--glow-red-1); border-radius: var(--radius-sm); }

  /* Utility a11y */
  .sr-only { position: absolute; inline-size: 1px; block-size: 1px; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; }
}

/* -------------------------------------------------------------------------- */
/* 5) COMPONENTS                                                               */
/* -------------------------------------------------------------------------- */
@layer components {
  /* 5.1 App shell sections */
  .section {
    min-block-size: 100svh; display: grid; place-items: center; text-align: center; position: relative;
    padding-inline: var(--sp-lg); padding-block: var(--sp-2xl);
    scroll-snap-align: start; isolation: isolate;
  }
  .section > .content {
    inline-size: min(92%, var(--content-w));
    padding: clamp(1rem, 1rem + 1vw, 2rem);
    background: color-mix(in oklab, var(--bg-2) 88%, black 12%);
    border: var(--border-1);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-2);
    backdrop-filter: blur(6px);
    transition: transform var(--t-slow), opacity var(--t-slow);
    transform: translateY(14px);
    opacity: .01;
  }
  .section.is-visible > .content { transform: translateY(0); opacity: 1; }

  .section h1, .section h2 { font-weight: 700; color: var(--red-500); letter-spacing: .3px; text-shadow: 0 0 10px rgba(255,0,0,.35); }
  .section h1 { font-size: var(--fs-5); }
  .section h2 { font-size: var(--fs-4); margin-block-end: var(--sp-sm); }
  .section p { max-inline-size: var(--read-w); margin-inline: auto; color: var(--text-2); }

  /* 5.2 Top Navigation */
  .nav {
    position: fixed; inset-inline: 0; inset-block-start: 0; z-index: 100;
    padding-inline: clamp(.8rem, 2vw, 2rem); padding-block: .6rem;
    background: color-mix(in srgb, var(--overlay-900) 80%, transparent);
    border-block-end: 1px solid var(--line-1);
    box-shadow: var(--shadow-1);
    backdrop-filter: blur(6px);
    display: flex; align-items: center; justify-content: space-between; gap: 1rem;
  }
  .nav__brand { font-weight: 700; font-size: var(--fs-2); color: var(--red-500); text-shadow: 0 0 8px rgba(255,0,0,.45); letter-spacing: .5px; }
  .nav__list { list-style: none; display: flex; gap: .6rem; flex-wrap: wrap; }
  .nav__link { padding: .45rem .9rem; border-radius: var(--radius-pill); color: var(--text-2); transition: background var(--t-fast), transform var(--t-fast), color var(--t-fast), box-shadow var(--t-fast); }
  .nav__link:hover { background: var(--overlay-red-100); color: var(--red-400); box-shadow: var(--glow-red-1); transform: translateY(-2px); }
  .nav__link[aria-current="page"] { background: var(--red-500); color: #fff; box-shadow: var(--shadow-1); }

  /* 5.3 Hero (home) */
  .hero { min-block-size: 100svh; display: grid; place-items: center; }
  .hero h1 { color: var(--text-0); text-shadow: 0 0 22px rgba(255,255,255,.5), 0 0 30px rgba(255,0,0,.4); letter-spacing: 1.5px; }
  .hero p { font-size: var(--fs-2); color: var(--text-1); font-style: italic; opacity: .9; }

  /* 5.4 Loading Screen */
  .loading {
    position: fixed; inset: 0; z-index: 200; display: grid; place-content: center; gap: var(--sp-sm);
    background: var(--bg-0); transition: opacity var(--t-slow);
  }
  .loading[hidden] { opacity: 0; pointer-events: none; }
  .spinner { inline-size: 80px; aspect-ratio: 1; position: relative; filter: drop-shadow(0 0 10px rgba(255,0,0,.4)); animation: pulse var(--t-slow) infinite alternate; }
  .spinner::before, .spinner::after { content: ""; position: absolute; inset: 0; border-radius: 50%; border: 4px solid transparent; }
  .spinner::before { border-block-start-color: var(--red-500); border-inline-start-color: var(--red-500); animation: spin 1.6s linear infinite; }
  .spinner::after  { border-block-end-color: #fff; border-inline-end-color: #fff; animation: spin 1.6s linear infinite; animation-delay: .8s; }
  .loading__text { color: var(--red-500); font-weight: 600; font-size: var(--fs-2); display: inline-flex; align-items: baseline; gap: .25em; }
  .loading__dots { display: inline-grid; grid-auto-flow: column; gap: .15em; }
  .loading__dots::before { content: '• • •'; letter-spacing: .2em; animation: dots 1.2s steps(4) infinite; overflow: hidden; inline-size: 1.6em; }

  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.06); } }
  @keyframes dots { 0% { clip-path: inset(0 100% 0 0); } 50% { clip-path: inset(0 0 0 0); } 100% { clip-path: inset(0 0 0 100%); } }

  /* 5.5 Starfield (GPU‑cheap) */
  .starfield { position: fixed; inset: 0; z-index: -1; pointer-events: none; background: radial-gradient(120rem 70rem at 50% 50%, rgba(0,0,0,.5), rgba(0,0,0,.9) 70%, var(--bg-0)); }
  .starfield::before, .starfield::after {
    content: ""; position: absolute; inset: -50%; background-repeat: repeat; opacity: .35; filter: drop-shadow(0 0 2px rgba(255,255,255,.3));
    background-image:
      radial-gradient(1px 1px at 20px 30px, #fff 60%, transparent 61%),
      radial-gradient(1px 1px at 80px 50px, #fff 60%, transparent 61%),
      radial-gradient(1px 1px at 130px 90px, #fff 60%, transparent 61%);
    background-size: 160px 160px;
    transform: translateZ(0);
  }
  .starfield::after { opacity: .18; background-size: 220px 220px; }

  /* 5.6 Timeline */
  .timeline { position: relative; margin-block: var(--sp-xl); padding-block: var(--sp-xl); }
  .timeline::before { content: ""; position: absolute; inset-block: 0; inset-inline-start: 50%; transform: translateX(-50%); inline-size: 3px; background: var(--line-1); box-shadow: inset 0 0 6px rgba(0,0,0,.5); }

  .timeline__item { position: relative; inline-size: 50%; padding: var(--sp-md) var(--sp-xl); opacity: 0; transform: translateX(40px); transition: opacity var(--t-med), transform var(--t-med); cursor: pointer; }
  .timeline__item.is-visible { opacity: 1; transform: translateX(0); }
  .timeline__item:nth-child(odd) { inset-inline-start: 0; text-align: end; transform: translateX(-40px); }
  .timeline__item:nth-child(even){ inset-inline-start: 50%; text-align: start; }

  .timeline__item::before { content: attr(data-year); position: absolute; inset-block-start: 50%; transform: translate(-50%, -50%); inline-size: 46px; block-size: 46px; border-radius: 50%;
    background: var(--red-500); color: #fff; display: grid; place-items: center; font-weight: 700; box-shadow: var(--shadow-1), var(--glow-red-1); border: 3px solid var(--bg-0);
  }
  .timeline__item:nth-child(odd)::before { inset-inline-start: calc(100% + 1.5px); }
  .timeline__item:nth-child(even)::before { inset-inline-start: -1.5px; }

  .timeline__card { background: var(--bg-3); border: var(--border-1); border-radius: var(--radius-md); padding: var(--sp-md); box-shadow: var(--shadow-1); position: relative; overflow: clip; transition: transform var(--t-med), box-shadow var(--t-med), background var(--t-med), border-color var(--t-med); }
  .timeline__card::after { content: ""; position: absolute; inset: 0; background: linear-gradient(45deg, transparent 49%, rgba(255,255,255,.04) 50%, transparent 51%); background-size: 16px 16px; opacity: .15; }
  .timeline__item:is(:hover, :focus-visible) .timeline__card, .timeline__item[aria-current="true"] .timeline__card { transform: translateY(-8px); border-color: var(--red-500); background: color-mix(in srgb, var(--red-600) 10%, var(--bg-3)); box-shadow: var(--shadow-3), var(--glow-red-2); }
  .timeline__card h3 { color: #fff; font-size: var(--fs-2); margin-block-end: var(--sp-xs); position: relative; z-index: 1; }
  .timeline__card p  { color: var(--text-1); font-size: var(--fs-0); position: relative; z-index: 1; }

  .timeline__details { margin-block-start: var(--sp-2xl); padding: var(--sp-lg); background: var(--bg-3); border: var(--border-1); border-radius: var(--radius-lg); max-inline-size: 700px; margin-inline: auto; min-block-size: 110px; display: grid; place-items: center; box-shadow: var(--shadow-2); opacity: 0; transform: translateY(18px); transition: opacity var(--t-med), transform var(--t-med); text-align: start; }
  .timeline__details.is-visible { opacity: 1; transform: translateY(0); }
  .timeline__details h3 { color: var(--red-500); font-size: var(--fs-2); margin-block-end: var(--sp-2xs); text-shadow: none; }
  .timeline__details p { color: var(--text-2); }

  /* 5.7 Skills */
  .skills { inline-size: min(92%, 780px); margin-inline: auto; text-align: start; background: var(--bg-2); border: var(--border-1); border-radius: var(--radius-md); box-shadow: var(--shadow-1); padding: var(--sp-md); }
  .skills__row { display: grid; grid-template-columns: 120px 1fr; gap: var(--sp-md); align-items: center; margin-block: var(--sp-sm); }
  .skills__label { font-weight: 600; color: #fff; font-size: var(--fs-1); }
  .skills__track { block-size: 10px; background: var(--bg-1); border: 1px solid var(--line-1); border-radius: 6px; position: relative; overflow: clip; box-shadow: inset 0 1px 3px rgba(0,0,0,.55); }
  .skills__bar { position: absolute; inset-block: 0; inset-inline-start: 0; inline-size: var(--value, 0%); background: linear-gradient(90deg, var(--red-500), var(--red-400)); box-shadow: 0 0 10px rgba(255,0,0,.55); transition: inline-size .9s cubic-bezier(.23,1,.32,1.05); }

  /* 5.8 Awards / Social Cards */
  .cards { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--sp-md); margin-block-start: var(--sp-md); }
  .card { inline-size: 168px; background: var(--bg-3); border: var(--border-1); border-radius: var(--radius-lg); padding: var(--sp-sm); text-align: center; box-shadow: var(--shadow-1); transition: transform var(--t-med), box-shadow var(--t-med), background var(--t-med), border-color var(--t-med); position: relative; overflow: clip; }
  .card::before { content: ""; position: absolute; inset: 0; background: linear-gradient(45deg, rgba(255,255,255,.03) 25%, transparent 25% 75%, rgba(255,255,255,.03) 75%); background-size: 10px 10px; opacity: .2; }
  .card__img { inline-size: 102px; block-size: 102px; object-fit: cover; border-radius: 50%; margin-inline: auto; margin-block-end: var(--sp-sm); border: 3px solid var(--bg-0); box-shadow: 0 0 8px rgba(0,0,0,.65); transition: transform var(--t-fast), border-color var(--t-fast); }
  .card__title { color: #fff; font-weight: 700; font-size: var(--fs-1); text-shadow: 0 1px 3px rgba(0,0,0,.5); }
  .card:is(:hover, :focus-within) { transform: translateY(-8px) rotate(.5deg); box-shadow: var(--shadow-3), var(--glow-red-1); border-color: var(--red-500); background: color-mix(in srgb, var(--red-600) 10%, var(--bg-3)); }
  .card:is(:hover, :focus-within) .card__img { transform: scale(1.03); border-color: #fff; }

  /* 5.9 Footer */
  .footer { text-align: center; padding: var(--sp-md) var(--sp-lg); background: color-mix(in srgb, var(--overlay-900) 88%, transparent); border-block-start: 1px solid var(--line-1); box-shadow: inset 0 2px 10px rgba(255,0,0,.25); }
  .social { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--sp-sm); margin-block-end: var(--sp-sm); }
  .social a { color: var(--text-2); padding: .45rem 1rem; border: 1px solid var(--line-1); border-radius: var(--radius-pill); transition: background var(--t-fast), border var(--t-fast), color var(--t-fast), transform var(--t-fast); font-weight: 500; }
  .social a:hover { background: var(--red-500); border-color: var(--red-400); color: #fff; transform: translateY(-3px); box-shadow: var(--glow-red-1); }
  .footer p { font-size: var(--fs-0); color: var(--text-3); }
}

/* -------------------------------------------------------------------------- */
/* 6) UTILITIES                                                                */
/* -------------------------------------------------------------------------- */
@layer utilities {
  .max-read { max-inline-size: var(--read-w); }
  .center    { margin-inline: auto; }
  .stack > * + * { margin-block-start: var(--sp-sm); }
  .grid { display: grid; gap: var(--sp-md); }
  .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .hide { display: none !important; }

  /* Data attribute helpers */
  [data-elev="1"] { box-shadow: var(--shadow-1); }
  [data-elev="2"] { box-shadow: var(--shadow-2); }
  [data-elev="3"] { box-shadow: var(--shadow-3); }
}

/* -------------------------------------------------------------------------- */
/* 7) RESPONSIVE / ADAPTIVE                                                     */
/* -------------------------------------------------------------------------- */
@layer components {
  @media (width >= 1200px) {
    .nav { padding-block: .8rem; }
    .nav__brand { font-size: clamp(1.3rem, .8rem + 1vw, 1.8rem); }
    .section > .content { padding: var(--sp-xl); }
  }

  @media (width <= 992px) {
    .nav { flex-direction: column; gap: .5rem; }
    .nav__list { justify-content: center; }
    .section { padding-inline: var(--sp-md); padding-block: calc(80px + var(--sp-lg)); min-block-size: auto; }
    .timeline::before { inset-inline-start: 20px; transform: none; }
    .timeline__item { inline-size: 100%; inset-inline-start: 0 !important; text-align: start !important; transform: translateY(24px); padding-inline-start: calc(20px + var(--sp-lg)); padding-inline-end: var(--sp-sm); }
    .timeline__item.is-visible { transform: translateY(0); }
    .timeline__item::before { inset-block-start: 20px; transform: translate(-50%, 0); inline-size: 40px; block-size: 40px; font-size: var(--fs-0); }
    .timeline__details { min-block-size: 90px; padding: var(--sp-md); }
    .cards .card { inline-size: 150px; }
    .card__img { inline-size: 90px; block-size: 90px; }
  }

  @media (width <= 480px) {
    .hero h1 { font-size: clamp(2rem, 8vw, 3rem); }
    .hero p  { font-size: clamp(1rem, 3.5vw, 1.25rem); }
    .cards .card { inline-size: 128px; padding: var(--sp-2xs); }
    .card__img { inline-size: 78px; block-size: 78px; }
    .nav__brand { font-size: 1.1rem; }
  }
}

/* -------------------------------------------------------------------------- */
/* 8) MOTION PREFERENCES                                                        */
/* -------------------------------------------------------------------------- */
@layer overrides {
  @media (prefers-reduced-motion: reduce) {
    html { scroll-behavior: auto; }
    *, *::before, *::after { animation: none !important; transition: none !important; }
    .loading { display: none !important; }
    .starfield { display: none !important; }
    .section > .content, .timeline__item { transform: none !important; opacity: 1 !important; }
    .timeline__item:is(:hover, :focus-visible) .timeline__card { background: var(--bg-3) !important; box-shadow: var(--shadow-1) !important; border-color: var(--line-1) !important; }
  }
}

/* -------------------------------------------------------------------------- */
/* 9) OPTIONAL: CODE & PRE STYLES                                               */
/* -------------------------------------------------------------------------- */
@layer components {
  code, pre { font-family: var(--font-mono); }
  pre { background: var(--bg-2); border: var(--border-1); border-radius: var(--radius-md); padding: var(--sp-md); overflow: auto; box-shadow: var(--shadow-1); }
  code { background: color-mix(in srgb, var(--overlay-500) 80%, transparent); padding: .15em .35em; border-radius: 6px; }
}

/* -------------------------------------------------------------------------- */
/* 10) THEME TOGGLER (example hooks)                                            */
/* -------------------------------------------------------------------------- */
@layer utilities {
  /* Toggle with [data-theme="light"] on <html> or <body> */
  .theme-toggle { display: inline-flex; align-items: center; gap: .5rem; padding: .45rem .8rem; border-radius: var(--radius-pill); border: 1px solid var(--line-1); background: var(--bg-2); }
  .theme-toggle:hover { border-color: var(--red-500); box-shadow: var(--glow-red-1); }
}
